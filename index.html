<html>
	<head>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="></script>	
		<script>
			$(document).ready(function () {
				$("#btLoadRedirect").on("click", function() {
					timeout = parseInt($("#timeout").val())
					redirectUrl = $("#redirect").val()
					console.log("Redirect to '"+ redirectUrl + "' with location.replace. Timeout: " + timeout);
					window.setTimeout(function () {
						location.replace(redirectUrl);
					}, timeout);
				})
				
				$("#btLoadClickLink").on("click", function() {
					timeout = parseInt($("#timeout").val())
					redirectUrl = $("#redirect").val()
					console.log("Redirect to '" + redirectUrl + "' with location.href. Timeout: " + timeout);
					window.setTimeout(function () {
						location.href = redirectUrl;
					}, timeout);
				})
				$("#btLoadAssign").on("click", function() {
					timeout = parseInt($("#timeout").val())
					redirectUrl = $("#redirect").val()
					console.log("Redirect to '"+ redirectUrl + "' with location.assign. Timeout: " + timeout);
					window.setTimeout(function () {
						try {
							window.location.assign(redirectUrl);
						} catch (err) {
							console.log("Error found...")
							alert(err)
						}
					}, timeout);
				})

				$("#btLoadAssignCatch").on("click", function() {
					timeout = parseInt($("#timeout").val())
					redirectUrl = $("#redirect").val()
					console.log("Redirect to '"+ redirectUrl + "' with location.assign. Timeout: " + timeout);
					window.setTimeout(function () {
						console.log("Starting...")
						var xhr = new XMLHttpRequest();
						console.log("Calling assign...")
						window.location.assign(redirectUrl);
						console.log(xhr.getResponseHeader())
					}, timeout);
				})
			});
		</script>
	</head>
	
	<body>
		Redirect: <input type="text" id="redirect" value='https://www.google.com' />
		<br />
		Timeout: <input type="text" id="timeout" value='5000' />
		<br /><br />
		<input type="button" id="btLoadRedirect" value="Load - location.replace - (HTTP redirect)" />
		<br /><br />
		<input type="button" id="btLoadClickLink" value="Load - location.href - (redirect like clicking on a link)" />
		<br /><br />
		<input type="button" id="btLoadAssign" value="Load - location.assign - (function to redirect like clicking on a link)" />
		<br /><br />
		<input type="button" id="btLoadAssignCatch" value="*** location.assign - (Trying to catch an error)***" />
		<br />
		<br />
		This is an iframe:
		<br />
		<iframe src="https://www.example.com" width="200" height="200">
		</iframe>
	</body>
</html>
